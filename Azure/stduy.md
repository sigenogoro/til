
# サービスについて

### iPhoneから使用できるAzure管理ツール
- Azure portal
- Azure cloud shell


### Azure Service Health
- リソースの正常性をチェックすることができる
- 障害が発生した際には、アラートを行ってくれる

## Azure 仮想マシン (VM)

- 物理的なハードウェア（サーバー等）の上に仮想的に構成されたコンピューター（一台のコンピュータで複数のコンピュータを動かす技術）
  - windows PC 上に Mac を使う etc
- IaaSのサーバーとして利用でき、利用者はAzure Virtual Machines上にアプリケーションのデプロイや、WebサーバーやDBサーバーの構築など、用途に合わせて自由にサーバーを構築することができる

## PowerAppsポータル
- 組織外のユーザーがさまざまな ID でサインインしたり、Microsoft Dataverse でデータを作成および表示したり、匿名でコンテンツを参照したりできる外部向けの Web サイトを作成することができる

### PowerShell
- windowsサーバを操作するために使うもの


## Azure リソースについて

- リソースグループに所属するリソースを移動することは可能
- 異なるサブスクリプションにあるリソースグループに移動することも可能
- ただし、移動をする際にはリソースの関連するリソースも同時に移動する必要があるため
- リソースは1つのリソースグループにのみ所属する。
- リソースの所属するリソースグループを変更することは可能。
- リソースグループに含まれるリソースは、異なるリージョンに所属することができる。

### Azure App Service Environment

- App Service アプリを大規模かつ安全に実行するために完全に分離された専用の環境を提供する、Azure App Service の機能

### トラストセンター

クラウドのデータの整合性を維持するための Microsoft の原則と、Microクラウド製品およびセキュリティ、プライバシー、コンプライアンスに関するサポート方法

### Microsoft Service Trust Portal
- 業界別のコンプライアンス
- 監査レポート（セキュリティなどのリスク監査）


### アカウントセンター
- 支出制限を設定することができる

## Azure AD Identity Protection(要チェック)
- Azure ADへの不正アクセスの検知・未然に防ぐことが目的のツール
- Azure AD の ID とアプリケーションを保護するための、ID ベース リスクの高度な検出・修復・調査機能が提供される
- 有料提供である（AzureADPremiumP2ライセンスを使用する必要がある）
- ユーザーリスク
  - 多要素認証がされていないなど不正アクセスされる危険性が高いユーザを検出する
- サインインリスク
  - 普段の場所とは異なる所からのアクセス・あり得ない移動（認証場所が違うなど）など、乗っ取りをされそうな認証を検知することができる
- これらは、アラートで知らせてくれるだけでなく、ブロックをしたりMFA設定を強制させることができる



### ロールベースのアクセス制御 (Role-Based Access Control, RBAC)

ロールを通じてユーザのアクセス許可を制御すること

対象のユーザの対象のリソースに対する動作の管理を行います。

### Azure Synapse

データ ウェアハウスやビッグ データ システム全体にわたって分析情報を取得する時間を早めるエンタープライズ分析サービスです。 Azure Synapse は、エンタープライズ データ ウェアハウスで使用される SQL テクノロジ、ビッグ データに使用される Spark テクノロジ、データ統合と ETL および ELT のための パイプライン、Power BI、CosmosDB、AzureML などの他の Azure サービスとの緊密な統合の長所を組み合わせたもの

### MSDN フィーラム

MSの サポートチームが運用しているフォーラムであり、AzureなどのMS製品に対する質問をすることができます。これは誰でも利用可能なサイトとなってます。

### Azure Data Lake

大量のデータを保持することに適したストレージリポジトリ

### Azure Service Health

- サービス正常性をチェックする（リージョン内のサービス正常性や次回のメンテナンスなどの情報をダッシュボードに表示してくれる
- 現在、利用中のサービス状況を確認できる
- 定期的なメンテナンス・サービスの問題
- 障害発生時のアラート受け取りルールの設定を行うことはできる

### アベイラビリティーゾーン（≒データセンター）AZ

- 1つのデータセンタの事を指しているわけではなく、1つのアベイラビリティーゾーンは1つ以上のデータセンタから構成されています
- 複数のAZ（≒データセンター）が近接した地域内でまとまっているものが、リージョン。
- Azure の場合、最低 3 つの個別の可用性ゾーン

### Azure Firewall

- Azure Virtual Network リソースを保護するクラウドベースのマネージドネットワーク セキュリティサービス
- Azure Storage プラットフォームには、次のデータ サービスが含まれています。


### ネットワークセキュリティグループ（NSG)

- Azure仮想マシンが外部ネットワークと通信を行う際に規則を定義したもの
- IPアドレスとポート番号による不正アクセスをブロックする
- 送信・受信セキュリティを行うことができる

### Azure Firewall
- 仮想ネットワーク全体のトラフィック制御を行うことが目的
- 仮想ネットワーク内でAzure Firewallが動く場合、仮想マシンはAzure Firewall を経由して、インターネット上のPCと通信を行う

### DDoS protection

- アプリケーション設計のベストプラクティスと組み合わせて、DDoS攻撃に対する防御を提供する
- さまざまな悪意のある攻撃からWebサイトを保護し、攻撃に関する詳細なレポートを生成できる

### Azure Security Center

- リソースのセキュリティ状態を監視し、問題を検知して、推奨する対応を促す
- セキュリティのインシデントの防止
- 無料機能
  - セキュリティスコア
  - 継続的な評価およびセキュリティに関する推奨事項
- 有料版(Azure Defenderが必要)
  - Just in Time VM アクセス
  - PaaS サービスの脅威保護 など
  - AWS GCP の監視も行うことができる


### Azure Information Protection (AIP)

- クラウドベースのソリューションです。これにより、組織はコンテンツにラベルを適用してドキュメントや電子メールの検出、分類、および保護を行うことができます
- Azure Information Scanner で問題が発生した場合は、次のように、 Start-Aipscanの診断 PowerShell コマンドを使用して、デプロイが正常であるかどうかを確認できる
  - データベースが最新かどうか
  - ネットワーク Url にアクセスできるかどうか
  - 有効な認証トークンがあるかどうか、およびポリシーを取得できるかどうか
  - プロファイルが Azure portal で定義されているかどうか
  - オフライン/オンライン構成が存在し、取得できるかどうか
  - 構成されている規則が有効かどうか

### Azure ポリシー

- コンプライアンスに基づいて、このリソースグループ内でAzure App Service経由以外での新たな仮想マシンの作成を防ぐ
- Azureポリシーは適用前の構成には影響を与えません。
- Azure内の各種リソースの状態をチェックし、管理します。
- 複数のポリシールールをグループ化したもの「イニシアチブ」
- ユーザーによるリソース管理の可能範囲の操作
- RBACとの違いは、ポリシーは特定項目を指定することが可能
- ポリシー定義できるもの
  - ストレージ
  - リソースの種類（許可・許可しないもの）

### Azure services Encryption at Rest

- 実装されている暗号化サービスを利用して保存データを暗号化します。

### サブスクリプション

- 複数のサブスクにすることで、課金とセキュリティを分散できます。
- 組織内で請求書による支払いを分離したい時
- Azureには2つのサブスクリプションをマージすることはできません。各サブスクリプションはマージできない個別のエンティティである

### Azure Events Hubs

- 複数のリソースからのイベントを一元化されたリポジトリに取り込むことができます。

### Azure Container Instances

- Azure 環境内に Docker コンテナーをオンデマンドで実行するサービス
- 分離コンテナー内で運用することができ、 イベントドリブンなアプリケーションを実行し、コンテナー開発パイプラインから迅速にデプロイして、データ処理およびビルド、ジョブの実行を行います。

### Azure Bot Service

ボットを開発するためのBot Framework SDKや、ボットをチャネルに接続するためのボットサービスなど、ボットを作成するためのコアコンポーネントを提供

### Azure Functions

- 複雑なオーケストレーションの問題も解決できるイベント駆動型のサーバーレスコンピューティングプラットフォーム
- これを利用してサーバレスアプリケーションを開発することができます。

### Azure HDInsight

背景
- ビックデータと呼ばれるデータ群を扱うの基盤「分散データ処理基盤」が必要となってきており、そのためにはオンプレ環境が必要だった。

- ビックデータを有効活用するための分散データ処理基盤をクラウド環境
- 大規模なデータ分析を行うための基盤を簡単に構築することができる
- オープンソース「Hadoop」を利用している


### Azure Monitor

- オンプレミスおよび Azure のさまざまなソースから監視テレメトリを収集
- アプリケーション全体の問題を検出および診断するために使用される

### Azure Application Insights(Azure Monitor にある機能のひとつ)
- 開発エンジニア向けに作成されたツール
  - アプリケーションのパフォーマンスについて、監視・検知・アラートを流すことができる
  - ユーザ視点での動作確認（利用状態の分析）
- アプリケーションパフォーマンス管理（APM）サービスを使うと、実行中のアプリケーションを監視しパフォーマンスの異常を自動的に検出することや、組み込まれている分析ツールを使用してユーザーがアプリ上でどのような操作をしているかを把握することができます。
- アプリケーション、ゲストオペレーティングシステム、Azureリソース、Azureサブスクリプション、およびAzureテナントに関する監視データを収集するためのもの
- 基本的には無料（使用量によって、課金される）

### Microsoft Trust Center

- MicrosoftがすべてのMicrosoftクラウド製品およびサービスでセキュリティ、プライバシー、コンプライアンス、および透明性をサポートする方法に関する情報と詳細を含むWebページ

### Azure Data Lake

- 大量のデータを保持することに適したストレージリポジトリです。３０TBのデータを保存して、テラバイトおよびペタバイトのデータにスケーリングすることができる

### Azure SQL Data Warehouse

- Azure Data Lakeと連携してデータ解析を実施できるデータウェアハウス

### Azure SQL Database

- フル マネージドのインテリジェントなリレーショナル クラウド データベース

### Azure Container Instances

- コンテナーベースのアプリケーションを構築するサービス

### Azure Express Route
- Azure への接続方法
- オンプレミスのデータセンターからAzure PublicCloudにデータを転送するために使用されます。
- ExpressRouteを使用してAzurePublic Cloudからオンプレミスのデータセンターにデータを転送する場合、ユーザーはアウトバウンドデータ転送の料金が発生する
- オンプレミス環境や自社のデータセンターを、Azureと閉域網で直接接続するサービスです。インターネットを通した接続と異なり、専用回線で直接接続するため、安全で品質の高い接続が可能
  - VPN経由での接続では、通信部分に不安がある場合に使う

### Azure Cloud Shell
- Azure portal から起動できるコマンドラインツール
- Bash・power shell を使うことができる
- モバイル・power shell・CLI からアクセスすることができる
- Linux 上のコマンドを使うことができる

### Azure Databricks
- データエンジニアリング向けに設計された高速で使いやすいApache Sparkベースのビッグデータ分析サービスf
  - 大量データを捌くためのフレームワーク「Apache Hadoop」
  - 「Apache Hadoop」の機械学習の処理にも対応できるようにした「Apache Spark」
- 素早くデータ分析基盤を構築することが可能

### 仮想マシンを2つ以上の可用性ゾーンにデプロイ

- 仮想マシンを複数の可用性ゾーンを利用したマルチAZモードでデプロイすることで、複数のデータセンターに跨って仮想マシンが展開されるため、単一のデータセンター障害を起こすのを防ぐことができる


### Azure Logic Apps

- アプリ、データ、サービス、およびシステムを統合する自動化されたワークフローを作成および実行するためのクラウドベースのプラットフォーム

### Azure HDInsight

- 大量のデータを簡単かつ迅速に高いコスト効率で処理できるようになります。
- クラウドの Hadoop クラスターからなる管理対象クラスターで大量のデータを処理します。

### Azure Cost Management

- 予算アラートを作成し、コストが予算を超えている場合は通知を受け取ることができる

### Azure Active Directory ID Protection

- 条件に基づいてMFAを適用できる
- これは次のようなリスクの検出にも使用されます：匿名IPアドレスのログイン、見慣れないサインイン、資格情報の漏洩など。

### Log Analytics Workspace

- さまざまなAzureリソースからログやメトリクスを収集するために使用されるコンテナー

### Azure Advanced Threat Protection（ATP）

Azureネットワーク全体のユーザーアクティビティを監視するサービス

## Azure Virtual Network（VNet）
- ユーザーが作成したVNet内に仮想マシン（Azure VM）などのAzureリソースを配置することで、リソース間で相互に通信できるようになります。
  - Azure リソース同士の通信を設定することができる
- Azure 内のプライベート ネットワークの基本的な構成要素です。仮想ネットワークを分けることで、 アプリケーション間を分離することができます。
- センサーを使用して脅威を監視することも可能
- 仮想マシンやオンプレ環境との接続も行うことができる

## VNetピアリング
- 異なるVNetに配置されたリソースどうしを接続することができる

### Azure Resource Manager
- Azure のデプロイおよび管理サービス
- ユーザが　Azure 上の操作を簡単に操作することができる

### Azure Storage
- Azure のストレージサービス
- PaaS化に該当する
- Azure BLOB
  - オブジェクトストレージであり、データは「オブジェクト」と呼ばれる単位で保管され、HTTP/HTTPS経由でアクセスすることができます。
- Azure Files
  - ファイルストレージであり、SMBプロトコルに対応しているのでファイルシステムとしてマウントすることができます。
- Azure Queue storage
  - メッセージストレージであり、システムを疎結合にするためのメッセージ指向ミドルウェアとして利用することができます。
- Azure Table storage
  - NoSQLデータベースであり、事前にデータ構造を定義することなくデータを読み書きすることができます。

### Azure DevTest Labs
- アプリケーションの開発・テスト環境をAzure上で構築できるサービス
- 複数のクリックで仮想マシンをセットアップできる
- 起動やシャットダウンを自動化できたり、アプリケーションをあらかじめプレインストールした状態にできたりする

### コンプライアンスマネージャー
- 組織の規制遵守活動の追跡、割り当て、検証を行ってくれる
- スコアも表示されるだけでなく、改善アクションまで案内してくれる

### Azure Synapse Analytics
- データ統合、エンタープライズDWH、およびビッグデータ分析が統合された無制限の分析サービスです。 データ容量はペタバイト単位であり、リレーショナルと非リレーショナルの両方の大規模データに対してクエリを発行することができます。
- 分析をスムーズに行うための大きなDBのようなイメージ（データクレンジングのような役割）

### Azure IoT Central
- 手軽にIoT 機器を接続するアプリケーションを構成
- フルマネージド型 IoT SaaSソリューション

### Azure IoT Hub
- Iot 同士の通信をサポートするマネージドサービス

### Azure Content Delivery Network (CDN)
- ユーザーに Web コンテンツを効率的に配信できるサーバーの分散ネットワークです。 CDN では、待ち時間を最小限に抑えるために、エンド ユーザーに近いポイントオブプレゼンス (POP) の場所のエッジ サーバーに、キャッシュされたコンテンツを格納します。


### Active Directory
- Windows に搭載されているツール
- 会社のWindows PC を一元管理することができる
### Azure AD Connect
- Active Direcory を使ってユーザ管理をしている場合、ユーザ名・パスワードをAzure Ad でも使えるようにすることができるツール
- Windows Serverにインストールをして利用するツール（30分に一回のペースで自動同期を行ってくれる）

### 可用性セット
- 障害ドメインは共通の電源やネットワーク機器などを共有している障害分け用の範囲です。１から３まで選択できます。
- 更新ドメインはAzureのメンテナンスリブートの際に影響される更新用の範囲です。１から２０まで選択できます。

### お金がかかるタイミング
- （原則）Azure リソースにお金がかかる
- 異なるリージョンにある仮想マシン間の通信
- Azure Strorege が使われている


### SLA の計算方法
- SLA 99% == 712.8h 以上の稼働を保証する（720 * 99%)
  - 1ヶ月 = 720h
- 月間稼働率(％) ＝（最大利用時間 － ダウンタイム）÷ 最大利用時間 × 100

- VM 1つ
  - 99.5%
- VM 2つ（可用性セットを利用）
  - 99.90%(99.5% * 99.5%)
- VM 2つ（可用性ゾーン二つ -> 一つの可用性ゾーンに一つ）
  - (1 - 0.9995) * 100 = 0.05%(ダウンタイムが発生する確率)
  - 100% - (0.05 * 0.05) = 99.999975

- 複数のサービス。どちらか片方が動作していれば良い場合(可用性ゾーンを使った計算方法と同じ)
  - 100% - (サービス１のダウンタイム * サービス2のダウンタイム)
  - App Service が二つの場合
    - (1 - 0.9995) * 100 = 0.05%(ダウンタイムが発生する確率)
    - 100% - (0.05 * 0.05) = 99.999975
      - つまり、サービスを複数にすることでSLAを99.999975 にあげることができた